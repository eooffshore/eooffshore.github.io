

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Retrieving ERA5 data from CDS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/sphinx-book-theme.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/togglebutton.js"></script>
    <script type="text/javascript" src="../_static/clipboard.min.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="../_static/mystnb.js"></script>
    <script type="text/javascript" src="../_static/sphinx-book-theme.js"></script>
    <script type="text/javascript">var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" type="text/javascript" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script type="text/javascript">
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" type="text/javascript" src="../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/eooffshore_banner.png" class="logo" alt="logo">
  
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search..." aria-label="Search..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/research/data_cds_era5.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#also-possible-to-retrieve-single-value-per-month-time-0-00">
   Also possible to retrieve single value per month, time = 0:00:
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hourly-data-for-comparison-with-in-situ-buoy-hourly-data-unlike-monthly-single-no-10m-wind-speed-only-u-and-v">
   Hourly data for comparison with in situ buoy hourly  data (unlike monthly single, no 10m wind speed, only u and v)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#d-dimensions-so-can-run-sel-directly">
   1-D dimensions so can run sel() directly
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="retrieving-era5-data-from-cds">
<h1>Retrieving ERA5 data from CDS<a class="headerlink" href="#retrieving-era5-data-from-cds" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># See rabernat https://github.com/pangeo-data/pangeo-era5/blob/master/lazy_loading_expts.ipynb</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cdsapi</span>
<span class="kn">import</span> <span class="nn">fsspec</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="k">import</span> <span class="n">NearestNeighbors</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">cdsapi</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;reanalysis-era5-pressure-levels&#39;</span>
<span class="n">request</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;year&#39;</span>          <span class="p">:</span> <span class="s1">&#39;2008&#39;</span><span class="p">,</span>
        <span class="s1">&#39;month&#39;</span>         <span class="p">:</span> <span class="s1">&#39;01&#39;</span><span class="p">,</span>
        <span class="s1">&#39;day&#39;</span>           <span class="p">:</span> <span class="s1">&#39;01&#39;</span><span class="p">,</span>
        <span class="s1">&#39;time&#39;</span>          <span class="p">:</span> <span class="s1">&#39;12:00&#39;</span><span class="p">,</span>
        <span class="s1">&#39;variable&#39;</span>      <span class="p">:</span> <span class="s1">&#39;temperature&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pressure_level&#39;</span><span class="p">:</span> <span class="s1">&#39;1000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;product_type&#39;</span>  <span class="p">:</span> <span class="s1">&#39;reanalysis&#39;</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span>        <span class="p">:</span> <span class="s1">&#39;netcdf&#39;</span>
    <span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="k">with</span> <span class="n">fsspec</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;scipy&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;xarray.Dataset&gt;
Dimensions:    (latitude: 721, longitude: 1440, time: 1)
Coordinates:
  * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
  * latitude   (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
  * time       (time) datetime64[ns] 2008-01-01T12:00:00
Data variables:
    t          (time, latitude, longitude) float32 ...
Attributes:
    Conventions:  CF-1.6
    history:      2020-06-17 08:45:56 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">location</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;http://136.156.132.210/cache-compute-0005/cache/data4/adaptor.mars.internal-1592383555.4608016-10733-26-3adfaf41-4b1a-4c64-854f-758766cbe4e2.nc&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">cdsapi</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;reanalysis-era5-pressure-levels-monthly-means&#39;</span>
<span class="n">request</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;year&#39;</span>          <span class="p">:</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span>
        <span class="s1">&#39;month&#39;</span>         <span class="p">:</span> <span class="s1">&#39;01&#39;</span><span class="p">,</span>
        <span class="c1">#&#39;day&#39;           : &#39;01&#39;,</span>
        <span class="s1">&#39;time&#39;</span>          <span class="p">:</span> <span class="s1">&#39;12:00&#39;</span><span class="p">,</span>
        <span class="s1">&#39;variable&#39;</span>      <span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;u_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;v_component_of_wind&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;pressure_level&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;product_type&#39;</span>  <span class="p">:</span> <span class="s1">&#39;reanalysis&#39;</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span>        <span class="p">:</span> <span class="s1">&#39;netcdf&#39;</span>
    <span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="k">with</span> <span class="n">fsspec</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;scipy&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;xarray.Dataset&gt;
Dimensions:    (latitude: 721, longitude: 1440, time: 1)
Coordinates:
  * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
  * latitude   (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
  * time       (time) datetime64[ns] 2020-01-01T12:00:00
Data variables:
    u          (time, latitude, longitude) float32 ...
    v          (time, latitude, longitude) float32 ...
Attributes:
    Conventions:  CF-1.6
    history:      2020-06-17 15:57:35 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.Dataset&gt;
Dimensions:    (latitude: 721, longitude: 1440, time: 1)
Coordinates:
  * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
  * latitude   (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
  * time       (time) datetime64[ns] 2020-01-01T12:00:00
Data variables:
    u          (time, latitude, longitude) float32 ...
    v          (time, latitude, longitude) float32 ...
Attributes:
    Conventions:  CF-1.6
    history:      2020-06-17 15:57:35 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#c = cdsapi.Client()</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;reanalysis-era5-pressure-levels-monthly-means&#39;</span>
<span class="n">request</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;year&#39;</span>          <span class="p">:</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span>
        <span class="s1">&#39;month&#39;</span>         <span class="p">:</span> <span class="s1">&#39;02&#39;</span><span class="p">,</span>
        <span class="c1">#&#39;day&#39;           : &#39;01&#39;,</span>
        <span class="s1">&#39;time&#39;</span>          <span class="p">:</span> <span class="s1">&#39;12:00&#39;</span><span class="p">,</span>
        <span class="s1">&#39;variable&#39;</span>      <span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;u_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;v_component_of_wind&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;pressure_level&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;product_type&#39;</span>  <span class="p">:</span> <span class="s1">&#39;reanalysis&#39;</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span>        <span class="p">:</span> <span class="s1">&#39;netcdf&#39;</span>
    <span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="k">with</span> <span class="n">fsspec</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;scipy&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;xarray.Dataset&gt;
Dimensions:    (latitude: 721, longitude: 1440, time: 1)
Coordinates:
  * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
  * latitude   (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
  * time       (time) datetime64[ns] 2020-02-01T12:00:00
Data variables:
    u          (time, latitude, longitude) float32 ...
    v          (time, latitude, longitude) float32 ...
Attributes:
    Conventions:  CF-1.6
    history:      2020-06-17 15:59:16 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#c = cdsapi.Client()</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;reanalysis-era5-pressure-levels-monthly-means&#39;</span>
<span class="n">request</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;year&#39;</span>          <span class="p">:</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span>
        <span class="s1">&#39;month&#39;</span>         <span class="p">:</span> <span class="s1">&#39;02&#39;</span><span class="p">,</span>
        <span class="c1">#&#39;day&#39;           : &#39;01&#39;,</span>
        <span class="s1">&#39;time&#39;</span>          <span class="p">:</span> <span class="s1">&#39;12:00&#39;</span><span class="p">,</span>
        <span class="s1">&#39;variable&#39;</span>      <span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;u_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;v_component_of_wind&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;pressure_level&#39;</span><span class="p">:</span> <span class="s1">&#39;1000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;product_type&#39;</span>  <span class="p">:</span> <span class="s1">&#39;reanalysis&#39;</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span>        <span class="p">:</span> <span class="s1">&#39;netcdf&#39;</span>
    <span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="k">with</span> <span class="n">fsspec</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;scipy&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;xarray.Dataset&gt;
Dimensions:    (latitude: 721, longitude: 1440, time: 1)
Coordinates:
  * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
  * latitude   (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
  * time       (time) datetime64[ns] 2020-02-01T12:00:00
Data variables:
    u          (time, latitude, longitude) float32 ...
    v          (time, latitude, longitude) float32 ...
Attributes:
    Conventions:  CF-1.6
    history:      2020-06-18 15:00:58 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">u</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">v</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>(&lt;xarray.DataArray &#39;u&#39; (time: 1, latitude: 721, longitude: 1440)&gt;
 array([[[-1.052856e-03, -1.052856e-03, ..., -1.052856e-03, -1.052856e-03],
         [-3.111061e+01, -3.108014e+01, ..., -3.116772e+01, -3.114107e+01],
         ...,
         [ 1.362129e+00,  1.396400e+00, ...,  1.289783e+00,  1.324055e+00],
         [-1.052856e-03, -1.052856e-03, ..., -1.052856e-03, -1.052856e-03]]],
       dtype=float32)
 Coordinates:
   * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
   * latitude   (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
   * time       (time) datetime64[ns] 2020-02-01T12:00:00
 Attributes:
     units:          m s**-1
     long_name:      U component of wind
     standard_name:  eastward_wind,
 &lt;xarray.DataArray &#39;v&#39; (time: 1, latitude: 721, longitude: 1440)&gt;
 [1038240 values with dtype=float32]
 Coordinates:
   * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
   * latitude   (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
   * time       (time) datetime64[ns] 2020-02-01T12:00:00
 Attributes:
     units:          m s**-1
     long_name:      V component of wind
     standard_name:  northward_wind)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">u</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>(array([[[ 2.3978949e-04,  2.3978949e-04,  2.3978949e-04, ...,
           2.3978949e-04,  2.3978949e-04,  2.3978949e-04],
         [ 9.3743076e+00,  9.3822412e+00,  9.3893824e+00, ...,
           9.3497114e+00,  9.3584394e+00,  9.3663731e+00],
         [ 8.7546587e+00,  8.7633867e+00,  8.7721138e+00, ...,
           8.7284765e+00,  8.7372036e+00,  8.7459316e+00],
         ...,
         [-4.6737027e+00, -4.6522808e+00, -4.6316524e+00, ...,
          -4.7355886e+00, -4.7149601e+00, -4.6943312e+00],
         [-4.2785878e+00, -4.2579589e+00, -4.2373304e+00, ...,
          -4.3380928e+00, -4.3182578e+00, -4.2976294e+00],
         [ 2.3978949e-04,  2.3978949e-04,  2.3978949e-04, ...,
           2.3978949e-04,  2.3978949e-04,  2.3978949e-04]]], dtype=float32),
 array([[[-7.2240829e-05, -7.2240829e-05, -7.2240829e-05, ...,
          -7.2240829e-05, -7.2240829e-05, -7.2240829e-05],
         [ 1.5154878e+00,  1.4757354e+00,  1.4352732e+00, ...,
           1.6368746e+00,  1.5964123e+00,  1.5559500e+00],
         [ 1.3870025e+00,  1.3486698e+00,  1.3117568e+00, ...,
           1.4977412e+00,  1.4608283e+00,  1.4239154e+00],
         ...,
         [-4.4232359e+00, -4.4480810e+00, -4.4736366e+00, ...,
          -4.3465710e+00, -4.3728361e+00, -4.3983908e+00],
         [-4.1712341e+00, -4.1925306e+00, -4.2145357e+00, ...,
          -4.1052170e+00, -4.1272230e+00, -4.1492281e+00],
         [-7.2240829e-05, -7.2240829e-05, -7.2240829e-05, ...,
          -7.2240829e-05, -7.2240829e-05, -7.2240829e-05]]], dtype=float32))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">longitude</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">latitude</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>(&lt;xarray.DataArray &#39;longitude&#39; (longitude: 1440)&gt;
 array([0.0000e+00, 2.5000e-01, 5.0000e-01, ..., 3.5925e+02, 3.5950e+02,
        3.5975e+02], dtype=float32)
 Coordinates:
   * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
 Attributes:
     units:      degrees_east
     long_name:  longitude,
 &lt;xarray.DataArray &#39;latitude&#39; (latitude: 721)&gt;
 array([ 90.  ,  89.75,  89.5 , ..., -89.5 , -89.75, -90.  ], dtype=float32)
 Coordinates:
   * latitude  (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
 Attributes:
     units:      degrees_north
     long_name:  latitude)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#c = cdsapi.Client()</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;reanalysis-era5-single-levels-monthly-means&#39;</span>
<span class="n">request</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;year&#39;</span>          <span class="p">:</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span>
        <span class="s1">&#39;month&#39;</span>         <span class="p">:</span> <span class="s1">&#39;02&#39;</span><span class="p">,</span>
        <span class="c1">#&#39;day&#39;           : &#39;01&#39;,</span>
        <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;12:00&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;variable&#39;</span>      <span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;100m_u_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;100m_v_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;10m_u_component_of_wind&#39;</span><span class="p">,</span>
            <span class="s1">&#39;10m_v_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;10m_wind_speed&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;product_type&#39;</span><span class="p">:</span> <span class="s1">&#39;monthly_averaged_reanalysis_by_hour_of_day&#39;</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span>        <span class="p">:</span> <span class="s1">&#39;netcdf&#39;</span>
    <span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="k">with</span> <span class="n">fsspec</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;scipy&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;xarray.Dataset&gt;
Dimensions:    (latitude: 721, longitude: 1440, time: 2)
Coordinates:
  * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
  * latitude   (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
  * time       (time) datetime64[ns] 2020-02-01 2020-02-01T12:00:00
Data variables:
    u100       (time, latitude, longitude) float32 ...
    v100       (time, latitude, longitude) float32 ...
    u10        (time, latitude, longitude) float32 ...
    v10        (time, latitude, longitude) float32 ...
    si10       (time, latitude, longitude) float32 ...
Attributes:
    Conventions:  CF-1.6
    history:      2020-06-18 15:42:23 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">si10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.DataArray &#x27;si10&#x27; (time: 2, latitude: 721, longitude: 1440)&gt;
[2076480 values with dtype=float32]
Coordinates:
  * longitude  (longitude) float32 0.0 0.25 0.5 0.75 ... 359.25 359.5 359.75
  * latitude   (latitude) float32 90.0 89.75 89.5 89.25 ... -89.5 -89.75 -90.0
  * time       (time) datetime64[ns] 2020-02-01 2020-02-01T12:00:00
Attributes:
    units:      m s**-1
    long_name:  10 metre wind speed</pre></div></div>
</div>
<div class="section" id="also-possible-to-retrieve-single-value-per-month-time-0-00">
<h2>Also possible to retrieve single value per month, time = 0:00:<a class="headerlink" href="#also-possible-to-retrieve-single-value-per-month-time-0-00" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cdsapi</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">cdsapi</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>

<span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span>
    <span class="s1">&#39;reanalysis-era5-single-levels-monthly-means&#39;</span><span class="p">,</span>
    <span class="p">{</span>
        <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;netcdf&#39;</span><span class="p">,</span>
        <span class="s1">&#39;product_type&#39;</span><span class="p">:</span> <span class="s1">&#39;monthly_averaged_reanalysis&#39;</span><span class="p">,</span>
        <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;100m_u_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;100m_v_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;10m_u_component_of_wind&#39;</span><span class="p">,</span>
            <span class="s1">&#39;10m_v_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;10m_wind_speed&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span>
        <span class="s1">&#39;month&#39;</span><span class="p">:</span> <span class="s1">&#39;01&#39;</span><span class="p">,</span>
        <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;00:00&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s1">&#39;download.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">si10</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>array([[[6.966979 , 6.966979 , 6.966979 , ..., 6.966979 , 6.966979 ,
         6.966979 ],
        [6.9477544, 6.9479833, 6.9479833, ..., 6.9470677, 6.9472966,
         6.9475255],
        [6.986662 , 6.9873486, 6.987806 , ..., 6.9850597, 6.9855175,
         6.986204 ],
        ...,
        [5.4402122, 5.442501 , 5.44479  , ..., 5.4342623, 5.4356356,
         5.437695 ],
        [5.0385523, 5.0396967, 5.040612 , ..., 5.0362635, 5.03695  ,
         5.0378656],
        [4.486527 , 4.486527 , 4.486527 , ..., 4.486527 , 4.486527 ,
         4.486527 ]],

       [[6.7609997, 6.7609997, 6.7609997, ..., 6.7609997, 6.7609997,
         6.7609997],
        [6.7472677, 6.7477255, 6.7479544, ..., 6.7454367, 6.7461233,
         6.74681  ],
        [6.74475  , 6.746352 , 6.7472677, ..., 6.7406306, 6.7420034,
         6.7433767],
        ...,
        [5.4029074, 5.405196 , 5.4077134, ..., 5.397186 , 5.3985586,
         5.4003897],
        [5.035348 , 5.0364923, 5.0376368, ..., 5.033746 , 5.0342035,
         5.03489  ],
        [4.47577  , 4.47577  , 4.47577  , ..., 4.47577  , 4.47577  ,
         4.47577  ]]], dtype=float32)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="hourly-data-for-comparison-with-in-situ-buoy-hourly-data-unlike-monthly-single-no-10m-wind-speed-only-u-and-v">
<h2>Hourly data for comparison with in situ buoy hourly  data (unlike monthly single, no 10m wind speed, only u and v)<a class="headerlink" href="#hourly-data-for-comparison-with-in-situ-buoy-hourly-data-unlike-monthly-single-no-10m-wind-speed-only-u-and-v" title="Permalink to this headline">¶</a></h2>
<p>https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels?tab=form</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cdsapi</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">cdsapi</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>

<span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span>
    <span class="s1">&#39;reanalysis-era5-single-levels&#39;</span><span class="p">,</span>
    <span class="p">{</span>
        <span class="s1">&#39;product_type&#39;</span><span class="p">:</span> <span class="s1">&#39;reanalysis&#39;</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;netcdf&#39;</span><span class="p">,</span>
        <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;10m_u_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;10m_v_component_of_wind&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;month&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;07&#39;</span><span class="p">,</span> <span class="s1">&#39;08&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;2018&#39;</span><span class="p">,</span>
        <span class="s1">&#39;day&#39;</span><span class="p">:</span> <span class="s1">&#39;01&#39;</span><span class="p">,</span>
        <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;12:00&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;area&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="mi">55</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span>
            <span class="o">-</span><span class="mi">5</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
    <span class="s1">&#39;download.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#c = cdsapi.Client()</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;reanalysis-era5-single-levels&#39;</span>
<span class="n">request</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;month&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;07&#39;</span><span class="p">,</span> <span class="s1">&#39;08&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="s1">&#39;2019&#39;</span><span class="p">,</span>
        <span class="s1">&#39;day&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;01&#39;</span><span class="p">,</span> <span class="s1">&#39;02&#39;</span><span class="p">,</span> <span class="s1">&#39;03&#39;</span><span class="p">,</span>
            <span class="s1">&#39;04&#39;</span><span class="p">,</span> <span class="s1">&#39;05&#39;</span><span class="p">,</span> <span class="s1">&#39;06&#39;</span><span class="p">,</span>
            <span class="s1">&#39;07&#39;</span><span class="p">,</span> <span class="s1">&#39;08&#39;</span><span class="p">,</span> <span class="s1">&#39;09&#39;</span><span class="p">,</span>
            <span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="s1">&#39;11&#39;</span><span class="p">,</span> <span class="s1">&#39;12&#39;</span><span class="p">,</span>
            <span class="s1">&#39;13&#39;</span><span class="p">,</span> <span class="s1">&#39;14&#39;</span><span class="p">,</span> <span class="s1">&#39;15&#39;</span><span class="p">,</span>
            <span class="s1">&#39;16&#39;</span><span class="p">,</span> <span class="s1">&#39;17&#39;</span><span class="p">,</span> <span class="s1">&#39;18&#39;</span><span class="p">,</span>
            <span class="s1">&#39;19&#39;</span><span class="p">,</span> <span class="s1">&#39;20&#39;</span><span class="p">,</span> <span class="s1">&#39;21&#39;</span><span class="p">,</span>
            <span class="s1">&#39;22&#39;</span><span class="p">,</span> <span class="s1">&#39;23&#39;</span><span class="p">,</span> <span class="s1">&#39;24&#39;</span><span class="p">,</span>
            <span class="s1">&#39;25&#39;</span><span class="p">,</span> <span class="s1">&#39;26&#39;</span><span class="p">,</span> <span class="s1">&#39;27&#39;</span><span class="p">,</span>
            <span class="s1">&#39;28&#39;</span><span class="p">,</span> <span class="s1">&#39;29&#39;</span><span class="p">,</span> <span class="s1">&#39;30&#39;</span><span class="p">,</span>
            <span class="s1">&#39;31&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;12:00&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;variable&#39;</span>      <span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;10m_u_component_of_wind&#39;</span><span class="p">,</span> <span class="s1">&#39;10m_v_component_of_wind&#39;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;product_type&#39;</span><span class="p">:</span> <span class="s1">&#39;reanalysis&#39;</span><span class="p">,</span>
        <span class="s1">&#39;area&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">55</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span>
                <span class="o">-</span><span class="mi">5</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;netcdf&#39;</span>
    <span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="k">with</span> <span class="n">fsspec</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;scipy&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;xarray.Dataset&gt;
Dimensions:    (latitude: 17, longitude: 45, time: 124)
Coordinates:
  * longitude  (longitude) float32 -16.0 -15.75 -15.5 -15.25 ... -5.5 -5.25 -5.0
  * latitude   (latitude) float32 55.0 54.75 54.5 54.25 ... 51.5 51.25 51.0
  * time       (time) datetime64[ns] 2019-07-01 ... 2019-08-31T12:00:00
Data variables:
    u10        (time, latitude, longitude) float32 ...
    v10        (time, latitude, longitude) float32 ...
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">time</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.DataArray &#x27;time&#x27; (time: 124)&gt;
array([&#x27;2019-07-01T00:00:00.000000000&#x27;, &#x27;2019-07-01T12:00:00.000000000&#x27;,
       &#x27;2019-07-02T00:00:00.000000000&#x27;, &#x27;2019-07-02T12:00:00.000000000&#x27;,
       &#x27;2019-07-03T00:00:00.000000000&#x27;, &#x27;2019-07-03T12:00:00.000000000&#x27;,
       &#x27;2019-07-04T00:00:00.000000000&#x27;, &#x27;2019-07-04T12:00:00.000000000&#x27;,
       &#x27;2019-07-05T00:00:00.000000000&#x27;, &#x27;2019-07-05T12:00:00.000000000&#x27;,
       &#x27;2019-07-06T00:00:00.000000000&#x27;, &#x27;2019-07-06T12:00:00.000000000&#x27;,
       &#x27;2019-07-07T00:00:00.000000000&#x27;, &#x27;2019-07-07T12:00:00.000000000&#x27;,
       &#x27;2019-07-08T00:00:00.000000000&#x27;, &#x27;2019-07-08T12:00:00.000000000&#x27;,
       &#x27;2019-07-09T00:00:00.000000000&#x27;, &#x27;2019-07-09T12:00:00.000000000&#x27;,
       &#x27;2019-07-10T00:00:00.000000000&#x27;, &#x27;2019-07-10T12:00:00.000000000&#x27;,
       &#x27;2019-07-11T00:00:00.000000000&#x27;, &#x27;2019-07-11T12:00:00.000000000&#x27;,
       &#x27;2019-07-12T00:00:00.000000000&#x27;, &#x27;2019-07-12T12:00:00.000000000&#x27;,
       &#x27;2019-07-13T00:00:00.000000000&#x27;, &#x27;2019-07-13T12:00:00.000000000&#x27;,
       &#x27;2019-07-14T00:00:00.000000000&#x27;, &#x27;2019-07-14T12:00:00.000000000&#x27;,
       &#x27;2019-07-15T00:00:00.000000000&#x27;, &#x27;2019-07-15T12:00:00.000000000&#x27;,
       &#x27;2019-07-16T00:00:00.000000000&#x27;, &#x27;2019-07-16T12:00:00.000000000&#x27;,
       &#x27;2019-07-17T00:00:00.000000000&#x27;, &#x27;2019-07-17T12:00:00.000000000&#x27;,
       &#x27;2019-07-18T00:00:00.000000000&#x27;, &#x27;2019-07-18T12:00:00.000000000&#x27;,
       &#x27;2019-07-19T00:00:00.000000000&#x27;, &#x27;2019-07-19T12:00:00.000000000&#x27;,
       &#x27;2019-07-20T00:00:00.000000000&#x27;, &#x27;2019-07-20T12:00:00.000000000&#x27;,
       &#x27;2019-07-21T00:00:00.000000000&#x27;, &#x27;2019-07-21T12:00:00.000000000&#x27;,
       &#x27;2019-07-22T00:00:00.000000000&#x27;, &#x27;2019-07-22T12:00:00.000000000&#x27;,
       &#x27;2019-07-23T00:00:00.000000000&#x27;, &#x27;2019-07-23T12:00:00.000000000&#x27;,
       &#x27;2019-07-24T00:00:00.000000000&#x27;, &#x27;2019-07-24T12:00:00.000000000&#x27;,
       &#x27;2019-07-25T00:00:00.000000000&#x27;, &#x27;2019-07-25T12:00:00.000000000&#x27;,
       &#x27;2019-07-26T00:00:00.000000000&#x27;, &#x27;2019-07-26T12:00:00.000000000&#x27;,
       &#x27;2019-07-27T00:00:00.000000000&#x27;, &#x27;2019-07-27T12:00:00.000000000&#x27;,
       &#x27;2019-07-28T00:00:00.000000000&#x27;, &#x27;2019-07-28T12:00:00.000000000&#x27;,
       &#x27;2019-07-29T00:00:00.000000000&#x27;, &#x27;2019-07-29T12:00:00.000000000&#x27;,
       &#x27;2019-07-30T00:00:00.000000000&#x27;, &#x27;2019-07-30T12:00:00.000000000&#x27;,
       &#x27;2019-07-31T00:00:00.000000000&#x27;, &#x27;2019-07-31T12:00:00.000000000&#x27;,
       &#x27;2019-08-01T00:00:00.000000000&#x27;, &#x27;2019-08-01T12:00:00.000000000&#x27;,
       &#x27;2019-08-02T00:00:00.000000000&#x27;, &#x27;2019-08-02T12:00:00.000000000&#x27;,
       &#x27;2019-08-03T00:00:00.000000000&#x27;, &#x27;2019-08-03T12:00:00.000000000&#x27;,
       &#x27;2019-08-04T00:00:00.000000000&#x27;, &#x27;2019-08-04T12:00:00.000000000&#x27;,
       &#x27;2019-08-05T00:00:00.000000000&#x27;, &#x27;2019-08-05T12:00:00.000000000&#x27;,
       &#x27;2019-08-06T00:00:00.000000000&#x27;, &#x27;2019-08-06T12:00:00.000000000&#x27;,
       &#x27;2019-08-07T00:00:00.000000000&#x27;, &#x27;2019-08-07T12:00:00.000000000&#x27;,
       &#x27;2019-08-08T00:00:00.000000000&#x27;, &#x27;2019-08-08T12:00:00.000000000&#x27;,
       &#x27;2019-08-09T00:00:00.000000000&#x27;, &#x27;2019-08-09T12:00:00.000000000&#x27;,
       &#x27;2019-08-10T00:00:00.000000000&#x27;, &#x27;2019-08-10T12:00:00.000000000&#x27;,
       &#x27;2019-08-11T00:00:00.000000000&#x27;, &#x27;2019-08-11T12:00:00.000000000&#x27;,
       &#x27;2019-08-12T00:00:00.000000000&#x27;, &#x27;2019-08-12T12:00:00.000000000&#x27;,
       &#x27;2019-08-13T00:00:00.000000000&#x27;, &#x27;2019-08-13T12:00:00.000000000&#x27;,
       &#x27;2019-08-14T00:00:00.000000000&#x27;, &#x27;2019-08-14T12:00:00.000000000&#x27;,
       &#x27;2019-08-15T00:00:00.000000000&#x27;, &#x27;2019-08-15T12:00:00.000000000&#x27;,
       &#x27;2019-08-16T00:00:00.000000000&#x27;, &#x27;2019-08-16T12:00:00.000000000&#x27;,
       &#x27;2019-08-17T00:00:00.000000000&#x27;, &#x27;2019-08-17T12:00:00.000000000&#x27;,
       &#x27;2019-08-18T00:00:00.000000000&#x27;, &#x27;2019-08-18T12:00:00.000000000&#x27;,
       &#x27;2019-08-19T00:00:00.000000000&#x27;, &#x27;2019-08-19T12:00:00.000000000&#x27;,
       &#x27;2019-08-20T00:00:00.000000000&#x27;, &#x27;2019-08-20T12:00:00.000000000&#x27;,
       &#x27;2019-08-21T00:00:00.000000000&#x27;, &#x27;2019-08-21T12:00:00.000000000&#x27;,
       &#x27;2019-08-22T00:00:00.000000000&#x27;, &#x27;2019-08-22T12:00:00.000000000&#x27;,
       &#x27;2019-08-23T00:00:00.000000000&#x27;, &#x27;2019-08-23T12:00:00.000000000&#x27;,
       &#x27;2019-08-24T00:00:00.000000000&#x27;, &#x27;2019-08-24T12:00:00.000000000&#x27;,
       &#x27;2019-08-25T00:00:00.000000000&#x27;, &#x27;2019-08-25T12:00:00.000000000&#x27;,
       &#x27;2019-08-26T00:00:00.000000000&#x27;, &#x27;2019-08-26T12:00:00.000000000&#x27;,
       &#x27;2019-08-27T00:00:00.000000000&#x27;, &#x27;2019-08-27T12:00:00.000000000&#x27;,
       &#x27;2019-08-28T00:00:00.000000000&#x27;, &#x27;2019-08-28T12:00:00.000000000&#x27;,
       &#x27;2019-08-29T00:00:00.000000000&#x27;, &#x27;2019-08-29T12:00:00.000000000&#x27;,
       &#x27;2019-08-30T00:00:00.000000000&#x27;, &#x27;2019-08-30T12:00:00.000000000&#x27;,
       &#x27;2019-08-31T00:00:00.000000000&#x27;, &#x27;2019-08-31T12:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)
Coordinates:
  * time     (time) datetime64[ns] 2019-07-01 ... 2019-08-31T12:00:00
Attributes:
    long_name:  time</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">erddapy</span> <span class="k">import</span> <span class="n">ERDDAP</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">emodnet</span> <span class="o">=</span> <span class="n">ERDDAP</span><span class="p">(</span>
  <span class="c1"># TODO: https generates cert error</span>
  <span class="n">server</span><span class="o">=</span><span class="s1">&#39;http://erddap.emodnet-physics.eu/erddap&#39;</span><span class="p">,</span>
  <span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;tabledap&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">emodnet</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;csv&#39;</span>
<span class="n">emodnet</span><span class="o">.</span><span class="n">dataset_id</span><span class="o">=</span><span class="s1">&#39;EP_ERD_INT_WSPD_AL_TS_NRT&#39;</span>
<span class="n">emodnet</span><span class="o">.</span><span class="n">constraints</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;time&gt;=&#39;</span><span class="p">:</span> <span class="s1">&#39;2019-07-01T00:00:00Z&#39;</span><span class="p">,</span>
    <span class="s1">&#39;time&lt;=&#39;</span><span class="p">:</span> <span class="s1">&#39;2019-09-01T00:00:00Z&#39;</span><span class="p">,</span>
    <span class="s1">&#39;latitude&gt;=&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s1">&#39;latitude&lt;=&#39;</span><span class="p">:</span> <span class="mf">56.0</span><span class="p">,</span>
    <span class="s1">&#39;longitude&gt;=&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">16.0</span><span class="p">,</span>
    <span class="s1">&#39;longitude&lt;=&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">6.0</span><span class="p">,</span>
    <span class="s1">&#39;EP_PLATFORM_CODE&gt;=&#39;</span><span class="p">:</span> <span class="s1">&#39;62094&#39;</span><span class="p">,</span>
    <span class="s1">&#39;EP_PLATFORM_CODE&lt;=&#39;</span><span class="p">:</span> <span class="s1">&#39;62094&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="c1">#e.variables = [</span>
<span class="c1">#    &#39;depth&#39;,</span>
<span class="c1">#    &#39;latitude&#39;,</span>
<span class="c1">#    &#39;longitude&#39;,</span>
<span class="c1">#    &#39;salinity&#39;,</span>
<span class="c1">#    &#39;temperature&#39;,</span>
<span class="c1">#    &#39;time&#39;,</span>
<span class="c1">#]</span>

<span class="n">dfe</span> <span class="o">=</span> <span class="n">emodnet</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dfe</span><span class="o">=</span><span class="n">dfe</span><span class="p">[</span><span class="n">dfe</span><span class="p">[</span><span class="s1">&#39;depth (m)&#39;</span><span class="p">]</span><span class="o">&lt;=-</span><span class="mf">3.2</span><span class="p">]</span>
<span class="n">dfet</span><span class="o">=</span><span class="n">dfe</span><span class="p">[[</span><span class="s1">&#39;time (UTC)&#39;</span><span class="p">,</span> <span class="s1">&#39;WSPD (m/s)&#39;</span><span class="p">]]</span>
<span class="n">dfet</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">dfet</span><span class="p">[</span><span class="s1">&#39;time (UTC)&#39;</span><span class="p">])</span>
<span class="n">dfet</span><span class="p">[</span><span class="s1">&#39;wspd&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfet</span><span class="p">[</span><span class="s1">&#39;WSPD (m/s)&#39;</span><span class="p">]</span>
<span class="n">dfet</span><span class="o">=</span><span class="n">dfet</span><span class="p">[[</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;wspd&#39;</span><span class="p">]]</span>
<span class="n">dfet</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="stderr docutils container">
<pre class="stderr literal-block">&lt;ipython-input-132-a95c8acb5cae&gt;:3: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  dfet['time']=pd.to_datetime(dfet['time (UTC)'])
&lt;ipython-input-132-a95c8acb5cae&gt;:4: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  dfet['wspd']=dfet['WSPD (m/s)']
</pre>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>time</th>
      <th>wspd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-07-01 00:00:00+00:00</td>
      <td>8.101</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019-07-01 01:00:00+00:00</td>
      <td>7.223</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2019-07-01 02:00:00+00:00</td>
      <td>7.125</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2019-07-01 03:00:00+00:00</td>
      <td>8.589</td>
    </tr>
    <tr>
      <th>12</th>
      <td>2019-07-01 04:00:00+00:00</td>
      <td>9.175</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4428</th>
      <td>2019-08-31 20:00:00+00:00</td>
      <td>7.515</td>
    </tr>
    <tr>
      <th>4431</th>
      <td>2019-08-31 21:00:00+00:00</td>
      <td>7.809</td>
    </tr>
    <tr>
      <th>4434</th>
      <td>2019-08-31 22:00:00+00:00</td>
      <td>8.101</td>
    </tr>
    <tr>
      <th>4437</th>
      <td>2019-08-31 23:00:00+00:00</td>
      <td>7.613</td>
    </tr>
    <tr>
      <th>4440</th>
      <td>2019-09-01 00:00:00+00:00</td>
      <td>7.809</td>
    </tr>
  </tbody>
</table>
<p>1481 rows × 2 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#-6.704336,51.690425</span>
<span class="c1"># TODO: cheating here as M5 is slightly outside the orbit 23 product</span>
<span class="c1"># use actual for ERA5 matching</span>
<span class="n">m5lon</span> <span class="o">=</span> <span class="o">-</span><span class="mf">6.704336</span>
<span class="c1">#m5lon = -6.904336</span>
<span class="n">m5lat</span> <span class="o">=</span> <span class="mf">51.690426</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xx</span><span class="p">,</span><span class="n">yy</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">longitude</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">latitude</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">nbrs</span> <span class="o">=</span> <span class="n">NearestNeighbors</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">xx</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,),</span> <span class="n">yy</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#m4 = np.array([[-9.999136,54.999966]])</span>
<span class="n">distances</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">nbrs</span><span class="o">.</span><span class="n">kneighbors</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">m5lon</span><span class="p">,</span> <span class="n">m5lat</span><span class="p">]]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">indices</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">xx</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,),</span> <span class="n">yy</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="n">m5_nearest_latitude_index</span><span class="p">,</span> <span class="n">m5_nearest_longitude_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">xx</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m5_nearest_latitude_index</span><span class="p">,</span> <span class="n">m5_nearest_longitude_index</span><span class="p">)</span>

<span class="n">m5_nearest_grid</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">longitude</span><span class="o">=</span><span class="n">m5_nearest_longitude_index</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">m5_nearest_latitude_index</span><span class="p">)</span>
<span class="n">m5_nearest_lat1</span> <span class="o">=</span> <span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">latitude</span><span class="o">.</span><span class="n">item</span><span class="p">()</span><span class="c1">#ireland_grid.lat.values[m5_nearest_y_index, m5_nearest_x_index]</span>
<span class="n">m5_nearest_lon1</span> <span class="o">=</span> <span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">longitude</span><span class="o">.</span><span class="n">item</span><span class="p">()</span><span class="c1">#ireland_grid.lon.values[m5_nearest_y_index, m5_nearest_x_index]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m5_nearest_lon1</span><span class="p">,</span> <span class="n">m5_nearest_lat1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">m5_nearest_grid</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>[[622]]
[[0.07506172]]
(1, 1)

[-6.75 51.75]
13 37
-6.75 51.75
&lt;xarray.Dataset&gt;
Dimensions:    (time: 124)
Coordinates:
    longitude  float32 -6.75
    latitude   float32 51.75
  * time       (time) datetime64[ns] 2019-07-01 ... 2019-08-31T12:00:00
Data variables:
    u10        (time) float32 ...
    v10        (time) float32 ...
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="d-dimensions-so-can-run-sel-directly">
<h2>1-D dimensions so can run sel() directly<a class="headerlink" href="#d-dimensions-so-can-run-sel-directly" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">longitude</span><span class="o">=</span><span class="n">m5lon</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">m5lat</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.Dataset&gt;
Dimensions:    (time: 124)
Coordinates:
    longitude  float32 -6.75
    latitude   float32 51.75
  * time       (time) datetime64[ns] 2019-07-01 ... 2019-08-31T12:00:00
Data variables:
    u10        (time) float32 ...
    v10        (time) float32 ...
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">metpy.calc</span> <span class="k">import</span> <span class="n">wind_speed</span>
<span class="kn">from</span> <span class="nn">metpy.units</span> <span class="k">import</span> <span class="n">units</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m5_nearest_grid</span><span class="p">[</span><span class="s1">&#39;wspd&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">([</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">wind_speed</span><span class="p">(</span><span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">u10</span><span class="p">,</span> <span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">v10</span><span class="p">)))</span>
<span class="n">m5_nearest_grid</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.Dataset&gt;
Dimensions:    (time: 124)
Coordinates:
    longitude  float32 -6.75
    latitude   float32 51.75
  * time       (time) datetime64[ns] 2019-07-01 ... 2019-08-31T12:00:00
Data variables:
    u10        (time) float32 7.671526 5.897977 ... 5.5032473 8.299173
    v10        (time) float32 -0.70711493 -1.4575593 ... 11.787377 -2.060158
    wspd       (time) float32 7.704046 6.075411 3.4817188 ... 13.008766 8.551054
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="k">def</span> <span class="nf">loglaw_extrapolate</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">wind_speed</span><span class="p">,</span> <span class="n">zref</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">z0</span><span class="o">=</span><span class="mf">0.0002</span><span class="p">):</span>
    <span class="c1"># As mentioned in Remmers, although they used it only for 3-10, 10 upwards extrapolated with power law</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">z</span><span class="o">/</span><span class="n">z0</span><span class="p">)</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">zref</span><span class="o">/</span><span class="n">z0</span><span class="p">))</span> <span class="o">*</span> <span class="n">wind_speed</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dfet</span><span class="p">[</span><span class="s1">&#39;wspd10&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">loglaw_extrapolate</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dfet</span><span class="o">.</span><span class="n">wspd</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">)</span><span class="c1">#[dfet.time.isin(m5_nearest_grid.time.values)].wspd, 3)</span>
<span class="n">dfet</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>time</th>
      <th>wspd</th>
      <th>wspd10</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-07-01 00:00:00+00:00</td>
      <td>8.101</td>
      <td>9.054536</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019-07-01 01:00:00+00:00</td>
      <td>7.223</td>
      <td>8.073190</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2019-07-01 02:00:00+00:00</td>
      <td>7.125</td>
      <td>7.963655</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2019-07-01 03:00:00+00:00</td>
      <td>8.589</td>
      <td>9.599976</td>
    </tr>
    <tr>
      <th>12</th>
      <td>2019-07-01 04:00:00+00:00</td>
      <td>9.175</td>
      <td>10.254952</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4428</th>
      <td>2019-08-31 20:00:00+00:00</td>
      <td>7.515</td>
      <td>8.399560</td>
    </tr>
    <tr>
      <th>4431</th>
      <td>2019-08-31 21:00:00+00:00</td>
      <td>7.809</td>
      <td>8.728166</td>
    </tr>
    <tr>
      <th>4434</th>
      <td>2019-08-31 22:00:00+00:00</td>
      <td>8.101</td>
      <td>9.054536</td>
    </tr>
    <tr>
      <th>4437</th>
      <td>2019-08-31 23:00:00+00:00</td>
      <td>7.613</td>
      <td>8.509095</td>
    </tr>
    <tr>
      <th>4440</th>
      <td>2019-09-01 00:00:00+00:00</td>
      <td>7.809</td>
      <td>8.728166</td>
    </tr>
  </tbody>
</table>
<p>1481 rows × 3 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m5_wspd10</span><span class="o">=</span><span class="n">dfet</span><span class="p">[</span><span class="n">dfet</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">)]</span><span class="o">.</span><span class="n">wspd10</span>
<span class="n">m5_wspd10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0        9.054536
33       6.982309
69       2.727203
105      4.691012
141      6.218916
          ...    
4260    10.254952
4296     9.164072
4332     9.927464
4368    11.127881
4404     9.272488
Name: wspd10, Length: 124, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">era5_wspd</span><span class="o">=</span><span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">wspd</span><span class="o">.</span><span class="n">values</span>
<span class="n">era5_wpsd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>array([ 7.704046 ,  6.075411 ,  3.4817188,  3.637293 ,  4.4918637,
        7.397417 ,  6.2705426,  2.0593898,  5.279933 ,  0.5323964,
        4.0335007,  2.2134964,  1.0082308,  4.191232 ,  1.9080951,
        2.475605 ,  2.6037521,  4.9516454,  7.2779393,  6.443026 ,
        7.984456 ,  7.3636956,  6.998747 ,  4.6888514,  6.051792 ,
        4.59312  ,  2.1886575,  6.129946 ,  1.9338531,  4.1658125,
        4.3171735,  4.4794173,  6.4115777,  9.43099  ,  6.5462933,
        7.5003133,  5.8658075, 10.206134 , 13.361821 ,  6.9679017,
        7.43803  ,  9.734262 , 11.942972 ,  9.247278 ,  6.66095  ,
        3.795337 ,  5.579897 ,  5.6679683, 10.166295 , 10.986554 ,
       10.562535 ,  7.7548094,  5.5985193,  4.197238 ,  6.9562616,
        2.3478122,  2.8107524,  6.570344 , 10.30004  ,  8.933188 ,
        8.942834 ,  3.786308 ,  6.485423 ,  5.059359 ,  2.4017336,
        3.885455 ,  3.90651  ,  7.03824  ,  4.001773 ,  7.5073557,
        8.679917 ,  9.769113 , 10.95278  , 10.13053  ,  8.755383 ,
        7.530298 ,  3.923688 ,  4.8499594, 12.350967 , 14.402932 ,
       12.166959 , 16.034698 , 12.848499 ,  4.48885  ,  7.7443385,
        6.781478 ,  5.1871605,  5.0538726,  9.295822 ,  8.807515 ,
       10.968783 ,  7.3081045,  9.80006  , 10.244199 , 11.735599 ,
       10.419742 ,  9.686552 , 11.580413 , 10.044011 ,  8.650341 ,
        8.449431 ,  7.8354115,  6.2787294, 10.384615 , 11.34915  ,
       10.738465 ,  6.6717625,  5.7091336,  4.86962  ,  5.5505824,
        2.1192462,  2.1601632,  3.372101 ,  4.0170455,  4.462592 ,
        5.9209843, 10.2683935,  5.215174 ,  8.821468 , 12.286905 ,
       11.016246 , 11.809933 , 13.008766 ,  8.551054 ], dtype=float32)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="k">import</span> <span class="n">pearsonr</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pearsonr</span><span class="p">(</span><span class="n">m5_wspd10</span><span class="p">,</span> <span class="n">era5_wspd</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>(0.9437602483866845, 1.7475564122571178e-60)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdf</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;m5_wspd10&#39;</span><span class="p">:</span> <span class="n">m5_wspd10</span><span class="p">,</span> <span class="s1">&#39;era5_wspd&#39;</span><span class="p">:</span> <span class="n">era5_wspd</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>
<span class="n">mdf</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>m5_wspd10</th>
      <th>era5_wspd</th>
      <th>time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9.054536</td>
      <td>7.704046</td>
      <td>2019-07-01 00:00:00</td>
    </tr>
    <tr>
      <th>33</th>
      <td>6.982309</td>
      <td>6.075411</td>
      <td>2019-07-01 12:00:00</td>
    </tr>
    <tr>
      <th>69</th>
      <td>2.727203</td>
      <td>3.481719</td>
      <td>2019-07-02 00:00:00</td>
    </tr>
    <tr>
      <th>105</th>
      <td>4.691012</td>
      <td>3.637293</td>
      <td>2019-07-02 12:00:00</td>
    </tr>
    <tr>
      <th>141</th>
      <td>6.218916</td>
      <td>4.491864</td>
      <td>2019-07-03 00:00:00</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4260</th>
      <td>10.254952</td>
      <td>12.286905</td>
      <td>2019-08-29 12:00:00</td>
    </tr>
    <tr>
      <th>4296</th>
      <td>9.164072</td>
      <td>11.016246</td>
      <td>2019-08-30 00:00:00</td>
    </tr>
    <tr>
      <th>4332</th>
      <td>9.927464</td>
      <td>11.809933</td>
      <td>2019-08-30 12:00:00</td>
    </tr>
    <tr>
      <th>4368</th>
      <td>11.127881</td>
      <td>13.008766</td>
      <td>2019-08-31 00:00:00</td>
    </tr>
    <tr>
      <th>4404</th>
      <td>9.272488</td>
      <td>8.551054</td>
      <td>2019-08-31 12:00:00</td>
    </tr>
  </tbody>
</table>
<p>124 rows × 3 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;era5_wspd&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;m5_wspd10&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mdf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fecac4593a0&gt;
</pre></div>
</div>
<img alt="../_images/data_cds_era5_38_1.png" src="../_images/data_cds_era5_38_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mod</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">mdf</span><span class="o">.</span><span class="n">m5_wspd10</span><span class="p">,</span> <span class="n">mdf</span><span class="o">.</span><span class="n">era5_wspd</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>        <td>m5_wspd10</td>    <th>  R-squared (uncentered):</th>      <td>   0.981</td> 
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared (uncentered):</th> <td>   0.981</td> 
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th>          <td>   6401.</td> 
</tr>
<tr>
  <th>Date:</th>             <td>Fri, 10 Jul 2020</td> <th>  Prob (F-statistic):</th>          <td>6.29e-108</td>
</tr>
<tr>
  <th>Time:</th>                 <td>16:30:02</td>     <th>  Log-Likelihood:    </th>          <td> -184.76</td> 
</tr>
<tr>
  <th>No. Observations:</th>      <td>   124</td>      <th>  AIC:               </th>          <td>   371.5</td> 
</tr>
<tr>
  <th>Df Residuals:</th>          <td>   123</td>      <th>  BIC:               </th>          <td>   374.3</td> 
</tr>
<tr>
  <th>Df Model:</th>              <td>     1</td>      <th>                     </th>              <td> </td>    
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>              <td> </td>    
</tr>
</table>
<table class="simpletable">
<tr>
      <td></td>         <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>era5_wspd</th> <td>    1.0014</td> <td>    0.013</td> <td>   80.003</td> <td> 0.000</td> <td>    0.977</td> <td>    1.026</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td> 2.245</td> <th>  Durbin-Watson:     </th> <td>   1.968</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.326</td> <th>  Jarque-Bera (JB):  </th> <td>   1.713</td>
</tr>
<tr>
  <th>Skew:</th>          <td>-0.233</td> <th>  Prob(JB):          </th> <td>   0.425</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 3.337</td> <th>  Cond. No.          </th> <td>    1.00</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdf</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>m5_wspd10</th>
      <th>era5_wspd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>124.000000</td>
      <td>124.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>7.168515</td>
      <td>7.036681</td>
    </tr>
    <tr>
      <th>std</th>
      <td>3.135424</td>
      <td>3.223764</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.200416</td>
      <td>0.532396</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>4.691012</td>
      <td>4.486492</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>7.037077</td>
      <td>6.726620</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>9.654465</td>
      <td>9.698480</td>
    </tr>
    <tr>
      <th>max</th>
      <td>16.582286</td>
      <td>16.034698</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">mean_squared_error</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mean_squared_error</span><span class="p">(</span><span class="n">mdf</span><span class="o">.</span><span class="n">m5_wspd10</span><span class="p">,</span> <span class="n">mdf</span><span class="o">.</span><span class="n">era5_wspd</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>1.0737226499030033
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(((</span><span class="n">mdf</span><span class="o">.</span><span class="n">era5_wspd</span><span class="o">-</span><span class="n">mdf</span><span class="o">.</span><span class="n">m5_wspd10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>1.0737226499030033
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">latitude</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.DataArray &#x27;latitude&#x27; (latitude: 17)&gt;
array([55.  , 54.75, 54.5 , 54.25, 54.  , 53.75, 53.5 , 53.25, 53.  , 52.75,
       52.5 , 52.25, 52.  , 51.75, 51.5 , 51.25, 51.  ], dtype=float32)
Coordinates:
  * latitude  (latitude) float32 55.0 54.75 54.5 54.25 ... 51.75 51.5 51.25 51.0
Attributes:
    units:      degrees_north
    long_name:  latitude</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dfe</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EP_PLATFORM_ID</th>
      <th>EP_PLATFORM_TYPE</th>
      <th>EP_PLATFORM_CODE</th>
      <th>EP_PLATFORM_LINK</th>
      <th>time (UTC)</th>
      <th>TIME_QC (1)</th>
      <th>depth (m)</th>
      <th>DEPTH_QC (1)</th>
      <th>pres (dbar)</th>
      <th>PRES_QC (1)</th>
      <th>...</th>
      <th>area</th>
      <th>author</th>
      <th>source</th>
      <th>contributor_name</th>
      <th>contributor_url</th>
      <th>data_assembly_center</th>
      <th>institution_edmo_code</th>
      <th>institution_references</th>
      <th>institution</th>
      <th>wmo_platform_code</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-07-01T00:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-07-01T01:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-07-01T02:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
    <tr>
      <th>9</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-07-01T03:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
    <tr>
      <th>12</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-07-01T04:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4428</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-08-31T20:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
    <tr>
      <th>4431</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-08-31T21:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
    <tr>
      <th>4434</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-08-31T22:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
    <tr>
      <th>4437</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-08-31T23:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
    <tr>
      <th>4440</th>
      <td>7345</td>
      <td>MO</td>
      <td>62094</td>
      <td>http://www.emodnet-physics.eu/Map/spi.aspx?id=...</td>
      <td>2019-09-01T00:00:00Z</td>
      <td>1</td>
      <td>-3.2</td>
      <td>7</td>
      <td>-3.2</td>
      <td>NaN</td>
      <td>...</td>
      <td>North Atlantic Ocean</td>
      <td>Marta de Alfonso</td>
      <td>mooring</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Puertos del Estado</td>
      <td>396</td>
      <td>http://www.marine.ie/</td>
      <td>Marine Institute (Ireland)</td>
      <td>62094</td>
    </tr>
  </tbody>
</table>
<p>1481 rows × 30 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 62094 = M5, 62095 = M6</span>
<span class="c1"># https://erddap.marine.ie/erddap/tabledap/IWBNetwork.csvp?station_id%2CCallSign%2Clongitude%2Clatitude%2Ctime%2CAtmosphericPressure%2CWindDirection%2CWindSpeed%2CGust%2CWaveHeight%2CWavePeriod%2CMeanWaveDirection%2CHmax%2CAirTemperature%2CDewPoint%2CSeaTemperature%2Csalinity%2CRelativeHumidity%2CSprTp%2CThTp%2CTp%2CQC_Flag&amp;CallSign%3E=%2262094%22&amp;CallSign%3C=%2262095%22&amp;time%3E=2020-05-22T00%3A00%3A00Z</span>
<span class="n">emodnet</span> <span class="o">=</span> <span class="n">ERDDAP</span><span class="p">(</span>
  <span class="c1"># TODO: https generates cert error</span>
  <span class="n">server</span><span class="o">=</span><span class="s1">&#39;http://erddap.marine.ie/erddap&#39;</span><span class="p">,</span>
  <span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;tabledap&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">emodnet</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="s1">&#39;csv&#39;</span>
<span class="n">emodnet</span><span class="o">.</span><span class="n">dataset_id</span><span class="o">=</span><span class="s1">&#39;IWBNetwork&#39;</span>
<span class="n">emodnet</span><span class="o">.</span><span class="n">constraints</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;time&gt;=&#39;</span><span class="p">:</span> <span class="s1">&#39;2019-07-01T00:00:00Z&#39;</span><span class="p">,</span>
    <span class="s1">&#39;time&lt;=&#39;</span><span class="p">:</span> <span class="s1">&#39;2019-09-01T00:00:00Z&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CallSign&gt;=&#39;</span><span class="p">:</span> <span class="s1">&#39;62094&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CallSign&lt;=&#39;</span><span class="p">:</span> <span class="s1">&#39;62094&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="c1">#e.variables = [</span>
<span class="c1">#    &#39;depth&#39;,</span>
<span class="c1">#    &#39;latitude&#39;,</span>
<span class="c1">#    &#39;longitude&#39;,</span>
<span class="c1">#    &#39;salinity&#39;,</span>
<span class="c1">#    &#39;temperature&#39;,</span>
<span class="c1">#    &#39;time&#39;,</span>
<span class="c1">#]</span>

<span class="n">dfm</span> <span class="o">=</span> <span class="n">emodnet</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
<span class="n">dfm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>station_id</th>
      <th>CallSign</th>
      <th>longitude (degrees_east)</th>
      <th>latitude (degrees_north)</th>
      <th>time (UTC)</th>
      <th>AtmosphericPressure (millibars)</th>
      <th>WindDirection (degrees true)</th>
      <th>WindSpeed (knots)</th>
      <th>Gust (knots)</th>
      <th>WaveHeight (meters)</th>
      <th>...</th>
      <th>Hmax (meters)</th>
      <th>AirTemperature (degrees_C)</th>
      <th>DewPoint (degrees_C)</th>
      <th>SeaTemperature (degrees_C)</th>
      <th>salinity (dimensionless)</th>
      <th>RelativeHumidity (percent)</th>
      <th>SprTp (degrees)</th>
      <th>ThTp (degrees_true)</th>
      <th>Tp (seconds)</th>
      <th>QC_Flag</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-07-01T00:00:00Z</td>
      <td>1019.861</td>
      <td>279.0</td>
      <td>15.749</td>
      <td>19.923</td>
      <td>1.563</td>
      <td>...</td>
      <td>2.344</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>15.000</td>
      <td>NaN</td>
      <td>73.047</td>
      <td>16.875</td>
      <td>233.438</td>
      <td>6.563</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-07-01T01:00:00Z</td>
      <td>1019.849</td>
      <td>276.0</td>
      <td>14.041</td>
      <td>17.836</td>
      <td>1.406</td>
      <td>...</td>
      <td>2.109</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>15.029</td>
      <td>NaN</td>
      <td>78.516</td>
      <td>19.688</td>
      <td>232.031</td>
      <td>5.977</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-07-01T02:00:00Z</td>
      <td>1019.983</td>
      <td>278.0</td>
      <td>13.851</td>
      <td>18.785</td>
      <td>1.406</td>
      <td>...</td>
      <td>2.109</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>15.029</td>
      <td>NaN</td>
      <td>78.125</td>
      <td>11.250</td>
      <td>236.250</td>
      <td>5.977</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-07-01T03:00:00Z</td>
      <td>1019.995</td>
      <td>281.0</td>
      <td>16.698</td>
      <td>20.682</td>
      <td>1.406</td>
      <td>...</td>
      <td>2.344</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>15.029</td>
      <td>NaN</td>
      <td>76.953</td>
      <td>16.875</td>
      <td>230.625</td>
      <td>6.680</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-07-01T04:00:00Z</td>
      <td>1020.276</td>
      <td>283.0</td>
      <td>17.836</td>
      <td>22.580</td>
      <td>1.563</td>
      <td>...</td>
      <td>2.344</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>15.000</td>
      <td>NaN</td>
      <td>75.391</td>
      <td>19.688</td>
      <td>222.188</td>
      <td>5.742</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1476</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-08-31T20:00:00Z</td>
      <td>1015.320</td>
      <td>299.0</td>
      <td>14.610</td>
      <td>18.595</td>
      <td>2.188</td>
      <td>...</td>
      <td>3.750</td>
      <td>16.074</td>
      <td>NaN</td>
      <td>16.143</td>
      <td>NaN</td>
      <td>66.797</td>
      <td>19.688</td>
      <td>241.875</td>
      <td>9.258</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1477</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-08-31T21:00:00Z</td>
      <td>1016.052</td>
      <td>308.0</td>
      <td>15.180</td>
      <td>20.303</td>
      <td>2.031</td>
      <td>...</td>
      <td>2.578</td>
      <td>15.586</td>
      <td>NaN</td>
      <td>16.201</td>
      <td>NaN</td>
      <td>65.234</td>
      <td>19.688</td>
      <td>248.906</td>
      <td>8.203</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1478</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-08-31T22:00:00Z</td>
      <td>1016.565</td>
      <td>294.0</td>
      <td>15.749</td>
      <td>19.923</td>
      <td>1.875</td>
      <td>...</td>
      <td>2.813</td>
      <td>15.244</td>
      <td>NaN</td>
      <td>16.201</td>
      <td>NaN</td>
      <td>70.313</td>
      <td>19.688</td>
      <td>248.906</td>
      <td>7.969</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1479</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-08-31T23:00:00Z</td>
      <td>1017.065</td>
      <td>295.0</td>
      <td>14.800</td>
      <td>18.216</td>
      <td>1.875</td>
      <td>...</td>
      <td>2.578</td>
      <td>15.000</td>
      <td>NaN</td>
      <td>16.201</td>
      <td>NaN</td>
      <td>71.875</td>
      <td>22.500</td>
      <td>241.875</td>
      <td>9.492</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1480</th>
      <td>M5</td>
      <td>62094</td>
      <td>-6.704336</td>
      <td>51.690425</td>
      <td>2019-09-01T00:00:00Z</td>
      <td>1017.419</td>
      <td>297.0</td>
      <td>15.180</td>
      <td>19.354</td>
      <td>1.719</td>
      <td>...</td>
      <td>2.344</td>
      <td>14.658</td>
      <td>NaN</td>
      <td>16.143</td>
      <td>NaN</td>
      <td>75.781</td>
      <td>25.313</td>
      <td>237.656</td>
      <td>7.617</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>1481 rows × 22 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dfm</span><span class="p">[</span><span class="s1">&#39;WindSpeed (knots)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>count    1481.000000
mean       12.722473
std         5.480230
min         0.569000
25%         8.539000
50%        12.523000
75%        16.887000
max        28.841000
Name: WindSpeed (knots), dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dfm</span><span class="p">[</span><span class="s1">&#39;wspd&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfm</span><span class="p">[</span><span class="s1">&#39;WindSpeed (knots)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:(</span><span class="n">x</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">knot</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">units</span><span class="o">.</span><span class="n">meter_per_second</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
<span class="n">dfm</span><span class="p">[</span><span class="s1">&#39;wspd&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0       8.101986
1       7.223314
2       7.125570
3       8.590193
4       9.175631
          ...   
1476    7.516033
1477    7.809267
1478    8.101986
1479    7.613778
1480    7.809267
Name: wspd, Length: 1481, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dfmt</span><span class="o">=</span><span class="n">dfm</span><span class="p">[[</span><span class="s1">&#39;time (UTC)&#39;</span><span class="p">,</span> <span class="s1">&#39;wspd&#39;</span><span class="p">]]</span>
<span class="n">dfmt</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">dfmt</span><span class="p">[</span><span class="s1">&#39;time (UTC)&#39;</span><span class="p">])</span>
<span class="c1">#dfet[&#39;wspd&#39;]=dfet[&#39;WSPD (m/s)&#39;]</span>
<span class="n">dfmt</span><span class="o">=</span><span class="n">dfmt</span><span class="p">[[</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;wspd&#39;</span><span class="p">]]</span>
<span class="n">dfmt</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="stderr docutils container">
<pre class="stderr literal-block">&lt;ipython-input-189-07f1a93a4235&gt;:2: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  dfmt['time']=pd.to_datetime(dfmt['time (UTC)'])
</pre>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>time</th>
      <th>wspd</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-07-01 00:00:00+00:00</td>
      <td>8.101986</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-07-01 01:00:00+00:00</td>
      <td>7.223314</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-07-01 02:00:00+00:00</td>
      <td>7.125570</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019-07-01 03:00:00+00:00</td>
      <td>8.590193</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2019-07-01 04:00:00+00:00</td>
      <td>9.175631</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1476</th>
      <td>2019-08-31 20:00:00+00:00</td>
      <td>7.516033</td>
    </tr>
    <tr>
      <th>1477</th>
      <td>2019-08-31 21:00:00+00:00</td>
      <td>7.809267</td>
    </tr>
    <tr>
      <th>1478</th>
      <td>2019-08-31 22:00:00+00:00</td>
      <td>8.101986</td>
    </tr>
    <tr>
      <th>1479</th>
      <td>2019-08-31 23:00:00+00:00</td>
      <td>7.613778</td>
    </tr>
    <tr>
      <th>1480</th>
      <td>2019-09-01 00:00:00+00:00</td>
      <td>7.809267</td>
    </tr>
  </tbody>
</table>
<p>1481 rows × 2 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">em5_wspd</span><span class="o">=</span><span class="n">dfet</span><span class="p">[</span><span class="n">dfet</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">)]</span><span class="o">.</span><span class="n">wspd</span>
<span class="n">em5_wspd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0       8.101
33      6.247
69      2.440
105     4.197
141     5.564
        ...  
4260    9.175
4296    8.199
4332    8.882
4368    9.956
4404    8.296
Name: wspd, Length: 124, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mm5_wspd</span><span class="o">=</span><span class="n">dfmt</span><span class="p">[</span><span class="n">dfmt</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">)]</span><span class="o">.</span><span class="n">wspd</span>
<span class="n">mm5_wspd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0       8.101986
11      6.247413
23      2.440524
35      4.197352
47      5.564231
          ...   
1420    9.175631
1432    8.199730
1444    8.882912
1456    9.956558
1468    8.296960
Name: wspd, Length: 124, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pearsonr</span><span class="p">(</span><span class="n">mm5_wspd</span><span class="p">,</span> <span class="n">em5_wspd</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>(0.9999999948700091, 0.0)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mod</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">mm5_wspd</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">em5_wspd</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>                                 OLS Regression Results                                
=======================================================================================
Dep. Variable:                      y   R-squared (uncentered):                   1.000
Model:                            OLS   Adj. R-squared (uncentered):              1.000
Method:                 Least Squares   F-statistic:                          7.476e+10
Date:                Fri, 10 Jul 2020   Prob (F-statistic):                        0.00
Time:                        17:30:11   Log-Likelihood:                          836.79
No. Observations:                 124   AIC:                                     -1672.
Df Residuals:                     123   BIC:                                     -1669.
Df Model:                           1                                                  
Covariance Type:            nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
x1             1.0001   3.66e-06   2.73e+05      0.000       1.000       1.000
==============================================================================
Omnibus:                       40.472   Durbin-Watson:                   1.948
Prob(Omnibus):                  0.000   Jarque-Bera (JB):                7.301
Skew:                          -0.101   Prob(JB):                       0.0260
Kurtosis:                       1.829   Cond. No.                         1.00
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mm5_wspd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0       8.101986
11      6.247413
23      2.440524
35      4.197352
47      5.564231
          ...   
1420    9.175631
1432    8.199730
1444    8.882912
1456    9.956558
1468    8.296960
Name: wspd, Length: 124, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">em5_wspd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0       8.101
33      6.247
69      2.440
105     4.197
141     5.564
        ...  
4260    9.175
4296    8.199
4332    8.882
4368    9.956
4404    8.296
Name: wspd, Length: 124, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mean_squared_error</span><span class="p">(</span><span class="n">mm5_wspd</span><span class="p">,</span> <span class="n">em5_wspd</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0.0006763701731300202
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dfe</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;/home/derek/data/eo/seai/emodnet/m5julyaug2019.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dfm</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;/home/derek/data/eo/seai/marineinstitute/m5julyaug2019.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m5_nearest_grid</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.Dataset&gt;
Dimensions:    (time: 124)
Coordinates:
    longitude  float32 -6.75
    latitude   float32 51.75
  * time       (time) datetime64[ns] 2019-07-01 ... 2019-08-31T12:00:00
Data variables:
    u10        (time) float32 7.671526 5.897977 ... 5.5032473 8.299173
    v10        (time) float32 -0.70711493 -1.4575593 ... 11.787377 -2.060158
    wspd       (time) float32 7.704046 6.075411 3.4817188 ... 13.008766 8.551054
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">metpy.calc</span> <span class="k">import</span> <span class="n">wind_direction</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m5_nearest_grid</span><span class="p">[</span><span class="s1">&#39;wspd&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">([</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">wind_speed</span><span class="p">(</span><span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">u10</span><span class="p">,</span> <span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">v10</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
<span class="n">m5_nearest_grid</span><span class="p">[</span><span class="s1">&#39;wdir&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">([</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">wind_direction</span><span class="p">(</span><span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">u10</span><span class="p">,</span> <span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">v10</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
<span class="n">m5_nearest_grid</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.Dataset&gt;
Dimensions:    (time: 124)
Coordinates:
    longitude  float32 -6.75
    latitude   float32 51.75
  * time       (time) datetime64[ns] 2019-07-01 ... 2019-08-31T12:00:00
Data variables:
    u10        (time) float32 7.671526 5.897977 ... 5.5032473 8.299173
    v10        (time) float32 -0.70711493 -1.4575593 ... 11.787377 -2.060158
    wspd       (time) float32 7.704046 6.075411 3.4817188 ... 13.008766 8.551054
    wdir       (time) float32 275.2663 283.8813 ... 205.02676 283.9411
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">wdir</span><span class="p">)</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>array([[&lt;matplotlib.axes._subplots.AxesSubplot object at 0x7fecb0f0b940&gt;]],
      dtype=object)
</pre></div>
</div>
<img alt="../_images/data_cds_era5_64_1.png" src="../_images/data_cds_era5_64_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#xs.groupby_bins(&#39;owiWindDirection&#39;, [x for x in range(0, 360+30, 30)]).mean()#, restore_coord_dims=True).mean()#.owiWindDirection_bins</span>
<span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">groupby_bins</span><span class="p">(</span><span class="s1">&#39;wdir&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">390</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span><span class="c1">#, np.std)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.Dataset&gt;
Dimensions:    (wdir_bins: 12)
Coordinates:
  * wdir_bins  (wdir_bins) object (0, 30] (30, 60] ... (300, 330] (330, 360]
    latitude   float32 51.75
    longitude  float32 -6.75
Data variables:
    u10        (wdir_bins) float32 -1.3559802 -3.4239051 ... 3.6514003 1.5886917
    v10        (wdir_bins) float32 -5.4964237 -3.0671234 ... -4.3881335
    wspd       (wdir_bins) float32 5.7166853 4.613874 ... 5.1251473 4.6972294
    wdir       (wdir_bins) float32 13.609257 46.08079 ... 313.04678 341.84937</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#xs.groupby_bins(&#39;owiWindDirection&#39;, [x for x in range(0, 360+30, 30)]).mean()#, restore_coord_dims=True).mean()#.owiWindDirection_bins</span>
<span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">groupby_bins</span><span class="p">(</span><span class="s1">&#39;wdir&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">390</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="c1">#apply(np.mean)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.Dataset&gt;
Dimensions:    (wdir_bins: 12)
Coordinates:
  * wdir_bins  (wdir_bins) object (0, 30] (30, 60] ... (300, 330] (330, 360]
    latitude   float32 51.75
    longitude  float32 -6.75
Data variables:
    u10        (wdir_bins) float32 -1.3559802 -3.4239051 ... 3.6514003 1.5886917
    v10        (wdir_bins) float32 -5.4964237 -3.0671234 ... -4.3881335
    wspd       (wdir_bins) float32 5.7166853 4.613874 ... 5.1251473 4.6972294
    wdir       (wdir_bins) float32 13.609257 46.08079 ... 313.04678 341.84937</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="k">import</span> <span class="n">weibull_min</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m5_nearest_grid</span><span class="p">[[</span><span class="s1">&#39;wspd&#39;</span><span class="p">,</span> <span class="s1">&#39;wdir&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby_bins</span><span class="p">(</span><span class="s1">&#39;wdir&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">390</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre>&lt;xarray.Dataset&gt;
Dimensions:    (wdir_bins: 12)
Coordinates:
  * wdir_bins  (wdir_bins) object (0, 30] (30, 60] ... (300, 330] (330, 360]
    latitude   float32 51.75
    longitude  float32 -6.75
Data variables:
    wspd       (wdir_bins) float32 5.7166853 4.613874 ... 5.1251473 4.6972294
    wdir       (wdir_bins) float32 13.609257 46.08079 ... 313.04678 341.84937</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">gds</span> <span class="ow">in</span> <span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">(</span><span class="n">wwdir</span><span class="o">=</span><span class="n">m5_nearest_grid</span><span class="o">.</span><span class="n">wdir</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;wdir&#39;</span><span class="p">)[[</span><span class="s1">&#39;wspd&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby_bins</span><span class="p">(</span><span class="s1">&#39;wwdir&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">390</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span><span class="o">.</span><span class="n">_iter_grouped</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">gds</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">weibull_min</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">gds</span><span class="o">.</span><span class="n">wspd</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;xarray.Dataset&gt;
Dimensions:    (time: 14)
Coordinates:
    wwdir      (time) float32 275.2663 283.8813 298.27933 ... 279.28275 283.9411
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-01 ... 2019-08-31T12:00:00
Data variables:
    wspd       (time) float32 7.704046 6.075411 2.2134964 ... 4.0170455 8.551054
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(0.45250303959955884, 2.213496182548915, 1.13818215122777)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 4)
Coordinates:
    wwdir      (time) float32 0.61803436 27.447487 14.020958 12.350548
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-02 2019-07-03 ... 2019-07-30
Data variables:
    wspd       (time) float32 3.4817188 4.4918637 4.59312 10.30004
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(0.9687796323934491, 3.4817185332380363, 1.8538871612408463)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 6)
Coordinates:
    wwdir      (time) float32 53.267815 49.075565 ... 35.06187 50.574944
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-02T12:00:00 ... 2019-07-14T12:00:00
Data variables:
    wspd       (time) float32 3.637293 7.397417 6.2705426 ... 2.1886575 6.129946
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(0.3248900151280017, 2.059389643248492, 1.3434858418805078)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 6)
Coordinates:
    wwdir      (time) float32 334.45227 338.4187 ... 339.60867 359.9499
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-05 2019-07-07 ... 2019-08-02
Data variables:
    wspd       (time) float32 5.279933 1.0082308 6.051792 ... 6.485423 2.4017336
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(2132.1125946768952, -3226.7614514495217, 3232.4941804083905)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 9)
Coordinates:
    wwdir      (time) float32 315.9845 300.21887 314.511 ... 329.66675 309.88373
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-05T12:00:00 ... 2019-08-25T12:00:00
Data variables:
    wspd       (time) float32 0.5323964 4.0335007 ... 7.7443385 2.1601632
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(0.47297019734325874, 0.5323963061000694, 3.969622909837927)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 4)
Coordinates:
    wwdir      (time) float32 70.77522 68.971596 60.74064 75.87985
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-07T12:00:00 ... 2019-08-01T12:00:00
Data variables:
    wspd       (time) float32 4.191232 1.9080951 1.9338531 5.059359
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(0.21659840792691798, 1.908094984186078, 1.5883164225391946)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 9)
Coordinates:
    wwdir      (time) float32 154.04117 161.99234 ... 165.91867 160.66394
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-08T12:00:00 ... 2019-08-24
Data variables:
    wspd       (time) float32 2.475605 4.1658125 5.6679683 ... 5.7091336 4.86962
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(0.33690386489578467, 2.475604865785199, 1.0317997623695474)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 24)
Coordinates:
    wwdir      (time) float32 232.4451 225.65944 ... 224.34932 217.41551
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-09 ... 2019-08-30T12:00:00
Data variables:
    wspd       (time) float32 2.6037521 6.443026 ... 11.016246 11.809933
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(2722.12877147078, -5231.854809749366, 5241.942839456373)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 28)
Coordinates:
    wwdir      (time) float32 243.69615 246.74239 ... 263.26337 242.09163
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-09T12:00:00 ... 2019-08-29
Data variables:
    wspd       (time) float32 4.9516454 7.2779393 ... 5.215174 8.821468
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(2.861153688295683, 0.11803225812644863, 9.324802955558077)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 13)
Coordinates:
    wwdir      (time) float32 193.24219 197.0997 ... 202.29257 205.02676
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-16 ... 2019-08-31
Data variables:
    wspd       (time) float32 4.3171735 4.4794173 ... 5.9209843 13.008766
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(0.4684279627355177, 4.317172898288625, 1.203241925001512)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 5)
Coordinates:
    wwdir      (time) float32 141.98238 132.06732 126.877884 141.7826 143.05997
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-23T12:00:00 ... 2019-08-24T12:00:00
Data variables:
    wspd       (time) float32 3.795337 3.90651 4.8499594 12.350967 5.5505824
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(0.269894449381609, 3.795336675554003, 2.7256136893712486)

&lt;xarray.Dataset&gt;
Dimensions:    (time: 2)
Coordinates:
    wwdir      (time) float32 92.46367 95.6852
    latitude   float32 51.75
    longitude  float32 -6.75
  * time       (time) datetime64[ns] 2019-07-29T12:00:00 2019-08-02T12:00:00
Data variables:
    wspd       (time) float32 6.570344 3.885455
Attributes:
    Conventions:  CF-1.6
    history:      2020-07-10 11:53:25 GMT by grib_to_netcdf-2.16.0: /opt/ecmw...
(0.1408758353854417, 3.8854546221359976, 2.0284295023640833)

</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./research"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Earth Observation Offshore <a href="https://www.twitter.com/EOOffshore">@EOOffshore</a><br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>